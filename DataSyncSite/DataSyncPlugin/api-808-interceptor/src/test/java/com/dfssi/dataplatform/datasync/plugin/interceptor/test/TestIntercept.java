package com.dfssi.dataplatform.datasync.plugin.interceptor.test;

import com.dfssi.dataplatform.datasync.common.utils.ByteBufUtils;
import com.dfssi.dataplatform.datasync.plugin.interceptor.decode.ProtocolDecoder;
import com.dfssi.dataplatform.datasync.plugin.interceptor.decode.X0200Decoder;
import com.dfssi.dataplatform.datasync.plugin.interceptor.bean.ProtoMsg;
import io.netty.buffer.ByteBuf;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Created by jian on 2017/12/16.
 */
public class TestIntercept {
    static final Logger logger = LoggerFactory.getLogger(TestIntercept.class);
    public static void main(String[] args) {
        ProtocolDecoder pd = new ProtocolDecoder();
        X0200Decoder x0200 = new X0200Decoder();
        ByteBufUtils byteBufUtils = new ByteBufUtils();
        //String str = "00 00 00 00 00 0C 00 03 02 18 C2 3C 07 1D 6B 5F 00 17 00 00 00 00 17 08 13 00 02 19 01 04 00 0F 63 E2 03 02 00 00 25 04 00 00 00 0C 2A 02 00 00 2B 04 00 00 0C E0 30 01 1F 31 01 0C";
        //String str="00 00 00 00 00 0C 00 00 0B FC FF FA FA FF FF FF FF 0C 00 00 0B FC FF FA FA FF FF FF FF 0C 00 00 0B FC FF FA FA 2C 02 00 00 17 7E";
        /**
         * 0704
         */
        //String str="00 00 00 00 00 0C 03 00 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 13 10 40 25 01 04 00 00 74 19 02 02 0C 54 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 00 00 00 00 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 00 00 E2 04 00 04 D0 DE 00 59 00 00 00 00 00 0C 03 00 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 14 09 42 19 01 04 00 00 74 19 02 02 00 00 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 6F 5C A7 E7 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 0A BE E2 04 00 04 D0 DE 00 59 00 00 00 00 00 0C 23 01 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 14 09 42 24 01 04 00 00 74 19 02 02 00 00 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 6F 5C A7 6E 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 0A BE E2 04 00 04 D0 DE";
        /**
         * 0704 完整消息体
         */
       // String str="00 03 01 00 59 00 00 00 00 00 0C 03 00 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 13 10 40 25 01 04 00 00 74 19 02 02 0C 54 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 00 00 00 00 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 00 00 E2 04 00 04 D0 DE 00 59 00 00 00 00 00 0C 03 00 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 14 09 42 19 01 04 00 00 74 19 02 02 00 00 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 6F 5C A7 E7 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 0A BE E2 04 00 04 D0 DE 00 59 00 00 00 00 00 0C 23 01 02 7D 01 91 2B 07 58 F5 10 00 00 00 00 00 00 17 12 14 09 42 24 01 04 00 00 74 19 02 02 00 00 03 02 00 00 25 04 00 00 00 00 2A 02 00 00 2B 04 6F 5C A7 6E 30 01 00 31 01 00 91 01 FF 92 04 00 00 00 00 14 04 00 00 00 00 E1 02 0A BE E2 04 00 04 D0 DE";

        //String str="00 03 00 02 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 0C FE 6C EE 3F 3F FF FF 00 00 00 00 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE BF 0B 00 00 7D 01 7D 01 7D 01 7D 01 FF FF 18 FE F1 31 F7 00 00 00 00 00 00 61 18 FE F1 31 F7 00 00 00 00 00 00 72 18 FE F1 31 F7 00 00 00 00 00 00 03 18 FE F1 31 F7 00 00 00 00 00 00 14 18 FE F1 31 F7 00 00 00 00 00 00 25 18 FE F1 31 F7 00 00 00 00 00 00 36 18 FE F1 31 F7 00 00 00 00 00 00 47 0C FF 03 31 C6 3F A0 1F C7 13 FF 05 0C FF 03 31 C6 3F A0 1F C7 13 FF 16 0C FF 03 31 C6 3F A0 1F C7 13 FF 27 0C FF 03 31 C6 3F A0 1F C7 13 FF 20 0C FF 03 31 C6 3F A0 1F C7 13 FF 31 0C FF 03 31 C6 3F A0 1F C7 13 FF 42 0C FF 03 31 C6 3F A0 1F C7 13 FF 53 0C FF 03 31 C6 3F A0 1F C7 13 FF 74 0C FF 03 31 C6 3F A0 1F C7 13 FF 05 0C FF 03 31 C6 3F A0 1F C7 13 FF 16 0C FF 03 31 C6 3F A0 1F C7 13 FF 27 0C FF 03 31 C6 3F A0 1F C7 13 FF 20 0C FF 03 31 C6 3F A0 1F C7 13 FF 31 0C FF 03 31 C6 3F A0 1F C7 13 FF 42 0C FF 03 31 C6 3F A0 1F C7 13 FF 53 0C FF 03 31 C6 3F A0 1F C7 13 FF 74 0C FF 03 31 C6 3F A0 1F C7 13 FF 05 0C FF 03 31 C6 3F A0 1F C7 13 FF 16 0C FF 03 31 C6 3F A0 1F C7 13 FF 27 0C FF 03 31 C6 3F A0 1F C7 13 FF 20 0C FF 03 31 C6 3F A0 1F C7 13 FF 31 0C FF 03 31 C6 3F A0 1F C7 13 FF 42 0C FF 03 31 C6 3F A0 1F C7 13 FF 53 0C FF 03 31 C6 3F A0 1F C7 13 FF 74 0C FF 03 31 C6 3F A0 1F C7 13 FF 05 0C FF 03 31 C6 3F A0 1F C7 13 FF 16 0C FF 03 31 C6 3F A0 1F C7 13 FF 27 0C FF 03 31 C6 3F A0 1F C7 13 FF 20 0C FF 03 31 C6 3F A0 1F C7 13 FF 31 0C FF 03 31 C6 3F A0 1F C7 13 FF 42 0C FF 03 31 C6 3F A0 1F C7 13 FF 53 0C FF 03 31 C6 3F A0 1F C7 13 FF 74 18 FE DF 00 84 50 00 00 7D 01 00 00 FF 18 FE DF 00 84 50 00 00 7D 01 00 00 FF 18 FE DF 00 84 50 00 00 7D 01 00 00 FF 18 FE F6 00 00 32 65 32 FF 20 22 FF 18 FE F6 00 00 32 65 32 FF 20 22 FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE F2 00 00 00 00 FE 00 00 FF FF 18 FE EE 00 75 FF 20 1D FF FF FF FF 18 FE EF 00 00 FF FF 00 FF FF FF 02 18 FE BD 00 00 F0 00 00 00 20 30 BD";


        /**
         * 0705
         */
        String str="002816342000004CFE6CEE3F3FFFFF000098044CF0040038E1BE1E210004BE58FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF0000F3044CF0040021A4A4FA250004A458FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF00000C054CF00400017F7DA41B00047F58FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF000086044CF00400107D9CEE1500049C58FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF00007E044CF00400707D7EEC1800047F58FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF0000B9044CF00400107D83CE1600048358FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF000046044CF00400007D83921600048358FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF00008F034CF00400307D832E1600048358FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF0000E3024CF00400407D99A41500049A58FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF00004B034CF00400107D83CE1600048358FEEE0076FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF000017044CF00400607D833B1600048458FEEE0077FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF0000D3034CF00400107D832A1600048358FEEE0077FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF00004F034CF00400107D830A1600048358FEEE0077FFFFFFFFFFFFFF4CFE6CEE3F3FFFFF0000E401";
        ByteBuf byteBuf = byteBufUtils.hexStringToByteBuf(str);
        /*logger.info("报警标志 "+ x0200.parseAlarm(byteBuf.readInt()).toString());
        logger.info("状态 "+x0200.getStateDesp(byteBuf.readInt()));
        logger.info("纬度 "+byteBuf.readInt());
        logger.info("经度 "+byteBuf.readInt());
        logger.info("高程 "+byteBuf.readShort());
        logger.info("速度 "+byteBuf.readShort());
        logger.info("方向 "+byteBuf.readShort());
        logger.info("时间 "+ ProtoUtil.readTime(byteBuf.readBytes(6)));
        logger.info("附加信息...");*/

        ProtoMsg protoMsg = new ProtoMsg();
        protoMsg.setDataBuf(io.netty.buffer.ByteBufUtil.getBytes(byteBuf));
        short msgId = 0x0705;
        protoMsg.setMsgId(String.valueOf(msgId));
        pd.interceptBody("0705",protoMsg);


/*        String str1="00 0B FC FF FA";
        ByteBuf buf = ByteBufCustomTool.hexStringToByteBuf(str1);
        System.out.println(ProtoUtil.readTime1(buf));*/

        //byte[] dest = pd.do_0200(msg);
        //System.out.println(new String(dest, Charsets.UTF_8));
    }
}
